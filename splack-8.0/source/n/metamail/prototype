VERSION=2.7
BUILD=2
ARCH=sparc
TAG=REC

PKGNAME=metamail-$VERSION-$ARCH-$BUILD
MAINTAINER="David Cantrell <david@slackware.com>"

IGNOREPATH=/tmp:/proc:/dev:/root:/var:/a
STRIPLIB=y
STRIPBIN=y

PROGNAME=metamail
DESC="\
metamail-$VERSION\n\
\n\
Metamail is an implementation of MIME, the Multipurpose Internet\n\
Mail Extensions, a proposed standard for multimedia mail on the\n\
Internet.  Metamail implements MIME, and also implements extensibility\n\
and configuration via the "mailcap" mechanism described in an\n\
informational RFC that is a companion to the MIME document."

compile() {
   tar xvzf $CWD/metamail-$VERSION.tar.gz
   cd metamail-$VERSION
   zcat $CWD/metamail-$VERSION.diff.gz | patch -p1 --verbose
   make INSTROOT=/usr
}

install() {
   make INSTROOT=/usr install-all
   mkdir -p /usr/doc/metamail-$VERSION
   cp CREDITS README /usr/doc/metamail-$VERSION
   cp mailcap > /usr/doc/metamail-$VERSION/mailcap
   ( cd man
     for section in 1 4 5
     do
        for page in *.$section
        do
           cat $page | gzip -9c > /usr/man/man$section/$page.gz
        done
     done )
}
